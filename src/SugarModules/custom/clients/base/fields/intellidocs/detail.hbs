{{!--
/*
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support.sugarcrm.com/06_Customer_Center/10_Master_Subscription_Agreements/.
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file.
 *
 * Copyright (C) SugarCRM Inc. All rights reserved.
 */
--}}
<a class="rowaction" href="javascript:void(0);"
   data-action="link"
    {{#if def.tooltip}}
   rel="tooltip"
   data-container="body"
   data-placement="bottom"
   data-original-title="{{str def.tooltip module}}"
    {{/if}}
   name="{{name}}">
    {{#if def.icon}}<i class="{{def.icon}}"></i>{{/if}}{{str label}}</a>
{{#if fetchCalled}}
    {{#if limitExceed }} 
        {{#if minimumTemplateCollection.length}}
            <ul class="dropdown-inset documents">
                {{#each minimumTemplateCollection.models}}                
                    <li>
                        {{# if attributes.id }}                                            
                        <a href="javascript:void(0);" data-action="{{../../../def.action}}" data-id="{{attributes.id}}" data-file-type="{{attributes.file_type}}"> {{attributes.name}}
                            {{#if attributes.bFlexiEnabled}}
                                <span class='fa fa-edit flexi-edit' style='float: right; margin-top: 3px;' rel="tooltip" data-title="Edit" data-placement="right" ></span>
                            {{/if}}
                        </a>
                        {{else}}
                            {{#eq attributes.data_action "moreDocuments"}}
                            <a href="javascript:void(0);" data-action="{{attributes.data_action}}" ><i class=""></i> {{attributes.name}}</a> 
                            {{else}}
                            <a href="javascript:void(0);" data-action="{{attributes.data_action}}" ><i class=""></i> {{attributes.name}}</a>
                            {{/eq}}
                        {{/if}}
                    </li>                
                {{/each}}
                    <li>
                        <a href="javascript:void(0);" data-action="mergeMultiple" >Merge Multiple Documents</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" data-action="listVariables" data-id='{{../../this.strParentId}}' data-module='{{../../this.strParentModule}}'>View Available Document Variables</a>
                    </li>
            </ul>
        {{else}}
            <ul class="dropdown-inset test">
                <li>
                    {{#if bNoResult}}
                        <a href="javascript:void(0);" class="disabled"><em>{{str "LBL_NO_PDF_TEMPLATE" this.module}}</em></a>
                    {{else}}
                        <div class="alert-process">
                            <strong>{{str "LBL_LOADING"}}</strong>
                            <div class="loading">
                                <span class="l1"></span><span class="l2"></span><span class="l3"></span>
                            </div>
                        </div>
                    {{/if}}
                </li>
            </ul>
        {{/if}}
    {{else}}
        {{#if templateCollection.length}}
            <ul class="dropdown-inset">
                {{#each templateCollection.models}}                
                    <li>
                        {{# if attributes.id }}
                        <!--<span class="filetype-thumbnail" data-filetype="{{attributes.type_label}}" style="top:-4px; "></span>-->
                        <a href="javascript:void(0);" data-action="{{../../../def.action}}" data-id="{{attributes.id}}" data-file-type="{{attributes.file_type}}"><i class=""></i> {{attributes.name}}
                        {{log attributes.name}}    
                        {{log attributes.bFlexiEnabled}}
                        {{#if attributes.bFlexiEnabled}}
                            <span class='fa fa-edit flexi-edit' style='float: right; margin-top: 3px;' rel="tooltip" data-title="Edit" data-placement="right" ></span>
                        {{/if}}
                        </a>
                        {{else}}
                        <a href="javascript:void(0);" data-action="{{attributes.data_action}}" ><i class=""></i> {{attributes.name}}</a>
                        {{/if}}
                    </li>                
                {{/each}}
                    <li>
                        <a href="javascript:void(0);" data-action="mergeMultiple" >Merge Multiple Documents</a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" data-action="listVariables" data-id='{{../../this.strParentId}}' data-module='{{../../this.strParentModule}}'>View Available Document Variables</a>
                    </li>
            </ul>
        {{else}}
            <ul class="dropdown-inset test">
                <li>
                    {{#if bNoResult}}
                        <a href="javascript:void(0);" class="disabled"><em>No Flexidocs Template found</em></a>                        
                    {{else}}
                        <div class="alert-process">
                            <strong>{{str "LBL_LOADING"}}</strong>
                            <div class="loading">
                                <span class="l1"></span><span class="l2"></span><span class="l3"></span>
                            </div>
                        </div>
                    {{/if}}
                </li>
                {{#if bNoResult}}
                <li>
                    <a href="javascript:void(0);" data-action="listVariables" data-id='{{../../this.strParentId}}' data-module='{{../../this.strParentModule}}'>View Available Document Variables</a>
                </li>
                {{/if}}
            </ul>
        {{/if}}
    {{/if}}
{{/if}}
